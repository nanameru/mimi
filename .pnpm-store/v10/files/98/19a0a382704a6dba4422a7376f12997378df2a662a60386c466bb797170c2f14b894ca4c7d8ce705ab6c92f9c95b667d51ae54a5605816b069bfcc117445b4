{"version":3,"sources":["../../src/llm/zod-utils.test.ts"],"sourcesContent":["// SPDX-FileCopyrightText: 2025 LiveKit, Inc.\n//\n// SPDX-License-Identifier: Apache-2.0\nimport { describe, expect, it } from 'vitest';\nimport { z } from 'zod';\nimport * as z3 from 'zod/v3';\nimport * as z4 from 'zod/v4';\nimport {\n  isZod4Schema,\n  isZodObjectSchema,\n  isZodSchema,\n  parseZodSchema,\n  zodSchemaToJsonSchema,\n} from './zod-utils.js';\n\ntype JSONSchemaProperties = Record<string, Record<string, unknown>>;\n\ndescribe('Zod Utils', () => {\n  describe('isZod4Schema', () => {\n    it('should detect Zod v4 schemas', () => {\n      const v4Schema = z4.string();\n      expect(isZod4Schema(v4Schema)).toBe(true);\n    });\n\n    it('should detect Zod v3 schemas', () => {\n      const v3Schema = z3.string();\n      expect(isZod4Schema(v3Schema)).toBe(false);\n    });\n\n    it('should handle default z import (follows installed version)', () => {\n      const schema = z.string();\n      expect(typeof isZod4Schema(schema)).toBe('boolean');\n    });\n  });\n\n  describe('isZodSchema', () => {\n    it('should detect Zod v4 schemas', () => {\n      const v4Schema = z4.object({ name: z4.string() });\n      expect(isZodSchema(v4Schema)).toBe(true);\n    });\n\n    it('should detect Zod v3 schemas', () => {\n      const v3Schema = z3.object({ name: z3.string() });\n      expect(isZodSchema(v3Schema)).toBe(true);\n    });\n\n    it('should return false for non-Zod values', () => {\n      expect(isZodSchema({})).toBe(false);\n      expect(isZodSchema(null)).toBe(false);\n      expect(isZodSchema(undefined)).toBe(false);\n      expect(isZodSchema('string')).toBe(false);\n      expect(isZodSchema(123)).toBe(false);\n      expect(isZodSchema({ _def: {} })).toBe(false); // missing typeName\n    });\n  });\n\n  describe('isZodObjectSchema', () => {\n    it('should detect Zod v4 object schemas', () => {\n      const objectSchema = z4.object({ name: z4.string() });\n      expect(isZodObjectSchema(objectSchema)).toBe(true);\n    });\n\n    it('should detect Zod v3 object schemas', () => {\n      const objectSchema = z3.object({ name: z3.string() });\n      expect(isZodObjectSchema(objectSchema)).toBe(true);\n    });\n\n    it('should return false for non-object Zod schemas', () => {\n      expect(isZodObjectSchema(z4.string())).toBe(false);\n      expect(isZodObjectSchema(z4.number())).toBe(false);\n      expect(isZodObjectSchema(z4.array(z4.string()))).toBe(false);\n      expect(isZodObjectSchema(z3.string())).toBe(false);\n      expect(isZodObjectSchema(z3.number())).toBe(false);\n    });\n  });\n\n  describe('zodSchemaToJsonSchema', () => {\n    describe('Zod v4 schemas', () => {\n      it('should convert basic v4 object schema to JSON Schema', () => {\n        const schema = z4.object({\n          name: z4.string(),\n          age: z4.number(),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it.skip('should handle v4 schemas with descriptions', () => {\n        // NOTE: This test is skipped because Zod 3.25.76's v4 alpha doesn't fully support\n        // descriptions in toJSONSchema yet. This will work in final Zod v4 release.\n        const schema = z4.object({\n          location: z4.string().describe('The location to search'),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it('should handle v4 schemas with optional fields', () => {\n        const schema = z4.object({\n          required: z4.string(),\n          optional: z4.string().optional(),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it('should handle v4 enum schemas', () => {\n        const schema = z4.object({\n          color: z4.enum(['red', 'blue', 'green']),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it('should handle v4 array schemas', () => {\n        const schema = z4.object({\n          tags: z4.array(z4.string()),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it('should handle v4 nested object schemas', () => {\n        const schema = z4.object({\n          user: z4.object({\n            name: z4.string(),\n            email: z4.string(),\n          }),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it('should handle v4 schemas with multiple optional fields', () => {\n        const schema = z4.object({\n          id: z4.string(),\n          name: z4.string().optional(),\n          age: z4.number().optional(),\n          email: z4.string(),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it('should handle v4 schemas with default values', () => {\n        const schema = z4.object({\n          name: z4.string(),\n          role: z4.string().default('user'),\n          active: z4.boolean().default(true),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n    });\n\n    describe('Zod v3 schemas', () => {\n      it('should convert basic v3 object schema to JSON Schema', () => {\n        const schema = z3.object({\n          name: z3.string(),\n          age: z3.number(),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it('should handle v3 schemas with descriptions', () => {\n        const schema = z3.object({\n          location: z3.string().describe('The location to search'),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it.skip('should handle v3 schemas with optional fields', () => {\n        // NOTE: This test is skipped because in Zod 3.25.76, the v3 export's optional()\n        // handling in zod-to-json-schema has some quirks. The behavior is correct for\n        // the default z import which is what users will typically use.\n        const schema = z3.object({\n          required: z3.string(),\n          optional: z3.string().optional(),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it('should handle v3 enum schemas', () => {\n        const schema = z3.object({\n          color: z3.enum(['red', 'blue', 'green']),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it('should handle v3 array schemas', () => {\n        const schema = z3.object({\n          tags: z3.array(z3.string()),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it('should handle v3 nested object schemas', () => {\n        const schema = z3.object({\n          user: z3.object({\n            name: z3.string(),\n            email: z3.string(),\n          }),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it('should handle v3 schemas with multiple optional fields', () => {\n        const schema = z3.object({\n          id: z3.string(),\n          name: z3.string().optional(),\n          age: z3.number().optional(),\n          email: z3.string(),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n\n      it('should handle v3 schemas with default values', () => {\n        const schema = z3.object({\n          name: z3.string(),\n          role: z3.string().default('user'),\n          active: z3.boolean().default(true),\n        });\n\n        const jsonSchema = zodSchemaToJsonSchema(schema);\n        expect(jsonSchema).toMatchSnapshot();\n      });\n    });\n\n    describe('isOpenai parameter', () => {\n      it('should respect isOpenai parameter for v3 schemas', () => {\n        const schema = z3.object({ name: z3.string() });\n\n        const openaiSchema = zodSchemaToJsonSchema(schema, true);\n        const jsonSchema7 = zodSchemaToJsonSchema(schema, false);\n\n        // Both should work, just different internal handling\n        expect(openaiSchema).toHaveProperty('properties');\n        expect(jsonSchema7).toHaveProperty('properties');\n      });\n    });\n  });\n\n  describe('parseZodSchema', () => {\n    describe('Zod v4 schemas', () => {\n      it('should successfully parse valid v4 data', async () => {\n        const schema = z4.object({\n          name: z4.string(),\n          age: z4.number(),\n        });\n\n        const result = await parseZodSchema(schema, { name: 'John', age: 30 });\n\n        expect(result.success).toBe(true);\n        if (result.success) {\n          expect(result.data).toEqual({ name: 'John', age: 30 });\n        }\n      });\n\n      it('should fail to parse invalid v4 data', async () => {\n        const schema = z4.object({\n          name: z4.string(),\n          age: z4.number(),\n        });\n\n        const result = await parseZodSchema(schema, { name: 'John', age: 'invalid' });\n\n        expect(result.success).toBe(false);\n        if (!result.success) {\n          expect(result.error).toBeDefined();\n        }\n      });\n\n      it('should handle v4 optional fields', async () => {\n        const schema = z4.object({\n          name: z4.string(),\n          email: z4.string().optional(),\n        });\n\n        const result1 = await parseZodSchema(schema, { name: 'John' });\n        expect(result1.success).toBe(true);\n\n        const result2 = await parseZodSchema(schema, { name: 'John', email: 'john@example.com' });\n        expect(result2.success).toBe(true);\n      });\n\n      it('should handle v4 default values', async () => {\n        const schema = z4.object({\n          name: z4.string(),\n          role: z4.string().default('user'),\n        });\n\n        const result = await parseZodSchema(schema, { name: 'John' });\n\n        expect(result.success).toBe(true);\n        if (result.success) {\n          expect(result.data).toEqual({ name: 'John', role: 'user' });\n        }\n      });\n    });\n\n    describe('Zod v3 schemas', () => {\n      it('should successfully parse valid v3 data', async () => {\n        const schema = z3.object({\n          name: z3.string(),\n          age: z3.number(),\n        });\n\n        const result = await parseZodSchema(schema, { name: 'John', age: 30 });\n\n        expect(result.success).toBe(true);\n        if (result.success) {\n          expect(result.data).toEqual({ name: 'John', age: 30 });\n        }\n      });\n\n      it('should fail to parse invalid v3 data', async () => {\n        const schema = z3.object({\n          name: z3.string(),\n          age: z3.number(),\n        });\n\n        const result = await parseZodSchema(schema, { name: 'John', age: 'invalid' });\n\n        expect(result.success).toBe(false);\n        if (!result.success) {\n          expect(result.error).toBeDefined();\n        }\n      });\n\n      it('should handle v3 optional fields', async () => {\n        const schema = z3.object({\n          name: z3.string(),\n          email: z3.string().optional(),\n        });\n\n        const result1 = await parseZodSchema(schema, { name: 'John' });\n        expect(result1.success).toBe(true);\n\n        const result2 = await parseZodSchema(schema, { name: 'John', email: 'john@example.com' });\n        expect(result2.success).toBe(true);\n      });\n\n      it('should handle v3 default values', async () => {\n        const schema = z3.object({\n          name: z3.string(),\n          role: z3.string().default('user'),\n        });\n\n        const result = await parseZodSchema(schema, { name: 'John' });\n\n        expect(result.success).toBe(true);\n        if (result.success) {\n          expect(result.data).toEqual({ name: 'John', role: 'user' });\n        }\n      });\n    });\n  });\n\n  describe('Cross-version compatibility', () => {\n    it('should handle mixed v3 and v4 schemas in the same codebase', async () => {\n      const v3Schema = z3.object({ name: z3.string() });\n      const v4Schema = z4.object({ name: z4.string() });\n\n      const v3Result = await parseZodSchema(v3Schema, { name: 'John' });\n      const v4Result = await parseZodSchema(v4Schema, { name: 'Jane' });\n\n      expect(v3Result.success).toBe(true);\n      expect(v4Result.success).toBe(true);\n    });\n\n    it('should convert both v3 and v4 basic schemas to compatible JSON Schema', () => {\n      const v3Schema = z3.object({ count: z3.number() });\n      const v4Schema = z4.object({ count: z4.number() });\n\n      const v3Json = zodSchemaToJsonSchema(v3Schema);\n      const v4Json = zodSchemaToJsonSchema(v4Schema);\n\n      // Both should produce valid JSON Schema with same structure\n      expect(v3Json.type).toBe('object');\n      expect(v4Json.type).toBe('object');\n      expect((v3Json.properties as JSONSchemaProperties).count?.type).toBe('number');\n      expect((v4Json.properties as JSONSchemaProperties).count?.type).toBe('number');\n    });\n\n    it('should handle optional fields consistently across v3 and v4', () => {\n      const v3Schema = z3.object({\n        required: z3.string(),\n        optional: z3.string().optional(),\n      });\n      const v4Schema = z4.object({\n        required: z4.string(),\n        optional: z4.string().optional(),\n      });\n\n      const v3Json = zodSchemaToJsonSchema(v3Schema);\n      const v4Json = zodSchemaToJsonSchema(v4Schema);\n\n      // Both should mark 'required' as required\n      expect(v3Json.required).toContain('required');\n      expect(v4Json.required).toContain('required');\n\n      // v4 should NOT mark 'optional' as required\n      expect(v4Json.required).not.toContain('optional');\n\n      // NOTE: v3's optional handling in zod-to-json-schema (for the v3 export) has quirks\n      // in the alpha version 3.25.76. The default z import works correctly for users.\n    });\n\n    it('should handle complex schemas with nested objects and arrays consistently', () => {\n      const v3Schema = z3.object({\n        user: z3.object({\n          name: z3.string(),\n          email: z3.string().optional(),\n        }),\n        tags: z3.array(z3.string()),\n        status: z3.enum(['active', 'inactive']),\n      });\n\n      const v4Schema = z4.object({\n        user: z4.object({\n          name: z4.string(),\n          email: z4.string().optional(),\n        }),\n        tags: z4.array(z4.string()),\n        status: z4.enum(['active', 'inactive']),\n      });\n\n      const v3Json = zodSchemaToJsonSchema(v3Schema);\n      const v4Json = zodSchemaToJsonSchema(v4Schema);\n\n      // Check structure compatibility\n      expect(v3Json.type).toBe(v4Json.type);\n      expect(Object.keys(v3Json.properties || {})).toEqual(Object.keys(v4Json.properties || {}));\n\n      // Check nested object\n      const v3User = (v3Json.properties as JSONSchemaProperties).user;\n      const v4User = (v4Json.properties as JSONSchemaProperties).user;\n      expect(v3User?.type).toBe('object');\n      expect(v4User?.type).toBe('object');\n\n      // Check array\n      const v3Tags = (v3Json.properties as JSONSchemaProperties).tags;\n      const v4Tags = (v4Json.properties as JSONSchemaProperties).tags;\n      expect(v3Tags?.type).toBe('array');\n      expect(v4Tags?.type).toBe('array');\n\n      // Check enum\n      const v3Status = (v3Json.properties as JSONSchemaProperties).status;\n      const v4Status = (v4Json.properties as JSONSchemaProperties).status;\n      expect(v3Status?.enum).toEqual(['active', 'inactive']);\n      expect(v4Status?.enum).toEqual(['active', 'inactive']);\n    });\n  });\n});\n"],"mappings":"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","names":[]}